window.__require=function e(t,n,a){function r(o,c){if(!n[o]){if(!t[o]){var s=o.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+o+"'")}}var p=n[o]={exports:{}};t[o][0].call(p.exports,function(e){return r(t[o][1][e]||e)},p,p.exports,e,t,n,a)}return n[o].exports}for(var i="function"==typeof __require&&__require,o=0;o<a.length;o++)r(a[o]);return r}({Camera:[function(e,t,n){"use strict";cc._RF.push(t,"3e30bFyIzxAWoQBfQamdHls","Camera"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=a.property,o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.map=null,t.screenMiddle=null,t.boundingBox=null,t.minx=null,t.maxx=null,t.miny=null,t.maxy=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.winSize;this.screenMiddle=cc.v2(e.width/2,e.height/2),this.boundingBox=cc.rect(0,0,this.map.width,this.map.height),this.minx=-(this.boundingBox.xMax-e.width),this.maxx=this.boundingBox.xMin,this.miny=-(this.boundingBox.yMax-e.height),this.maxy=this.boundingBox.yMin},t.prototype.start=function(){},t.prototype.update=function(e){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),a=t.sub(n).add(this.screenMiddle);a.x=cc.misc.clampf(a.x,this.minx,this.maxx),a.y=cc.misc.clampf(a.y,this.miny,this.maxy),this.node.position=this.node.parent.convertToNodeSpaceAR(a)},__decorate([i(cc.Node)],t.prototype,"target",void 0),__decorate([i(cc.Node)],t.prototype,"map",void 0),t=__decorate([r],t)}(cc.Component);n.default=o,cc._RF.pop()},{}],CollisderManager:[function(e,t,n){"use strict";cc._RF.push(t,"2f69e7hHFRC+oaOf8eK9Tc9","CollisderManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=a.property,o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onCollisionEnter=function(e,t){},t.prototype.onCollisionStay=function(e,t){},t.prototype.onCollisionExit=function(e,t){},__decorate([i(cc.Node)],t.prototype,"player",void 0),t=__decorate([r],t)}(cc.Component);n.default=o,cc._RF.pop()},{}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"07a22ndseRHRI4vxrnhvpUi","DataManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./UiManager"),r=cc._decorator,i=r.ccclass,o=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.userData=null,t.playerProperty={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"\u8fde\u5929\u677e",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.hero1={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.hero2={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.heroLockArr=[],t.equipBackpackArr=[],t.itemBackpackArr=[],t.autoFightGetCoinNum=700,t.autoFightGetExpNum=90,t.coinNum=0,t.expNum=0,t.backPackCapacity=100,t.h_expBookNum=2e3,t.l_expBookNum=1e3,t.nameArr=[],t.configArr=[],t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this,this.initData(),this.initGame()},t.prototype.initGame=function(){this.userData=JSON.parse(cc.sys.localStorage.getItem("config")),this.playerProperty=this.userData.json.playerProperty,this.hero1=this.userData.json.hero1,this.hero2=this.userData.json.hero2,this.heroLockArr=this.userData.json.heroLockArr,this.equipBackpackArr=this.userData.json.equipBackpackArr,this.itemBackpackArr=this.userData.json.itemBackpackArr,this.coinNum=this.userData.json.coinNum,this.expNum=this.userData.json.expNum},t.prototype.initData=function(){this.nameArr=["\u5b59\u5c1a\u9999","\u9646\u900a","\u7518\u5b81","\u53f8\u9a6c\u61ff","\u8340\u6538","\u8d3e\u8be9","\u8bf8\u845b\u4eae","\u5f20\u8fbd","\u5f90\u76db","\u66f9\u64cd"],this.configArr=[{atkType:0,atkNum:200,hp:800},{atkType:1,atkNum:300,hp:900},{atkType:0,atkNum:200,hp:500},{atkType:1,atkNum:220,hp:700},{atkType:0,atkNum:230,hp:800},{atkType:1,atkNum:300,hp:1e3},{atkType:0,atkNum:400,hp:1200},{atkType:1,atkNum:420,hp:1400},{atkType:0,atkNum:450,hp:1600},{atkType:1,atkNum:600,hp:3e3}]},t.prototype.getMonsterProperty=function(e,t){switch(t){case 1:return 15*e;case 2:return 80*e;case 3:return 80*e+Math.floor(20*Math.random());case 4:return 60*e+Math.floor(10*Math.random())}},t.prototype.getPlayerLevelFromExp=function(e){return Math.ceil((-17+Math.sqrt(289+12*e/5))/6)},t.prototype.saveDataToLocal=function(e){switch(e){case 1:0==a.default.getInstance().currentHeroId?this.userData.json.playerProperty=a.default.getInstance().currentHeroProperty:1==a.default.getInstance().currentHeroId?this.userData.json.hero1=a.default.getInstance().currentHeroProperty:2==a.default.getInstance().currentHeroId&&(this.userData.json.hero2=a.default.getInstance().currentHeroProperty);break;case 2:this.userData.json.heroLockArr=a.default.getInstance().currentHeroLockArr;break;case 3:this.userData.json.equipBackpackArr=a.default.getInstance().currentBpEquipArr,this.userData.json.itemBackpackArr=a.default.getInstance().currentBpItemArr;break;case 4:this.userData.json.coinNum=a.default.getInstance().currentCoinNum,this.userData.json.expNum=a.default.getInstance().currentExpNum}JSON.parse(cc.sys.localStorage.getItem("config"))!=this.userData?cc.sys.localStorage.setItem("config",JSON.stringify(this.userData)):console.log("\u65e0\u6570\u636e\u6539\u53d8")},t.prototype.getEqipNameFromId=function(e,t,n){switch(e){case 0:switch(t){case 0:return"\u6b66\u5668";case 1:return 100*n+Math.floor(10*Math.random());case 2:return 20*n+Math.floor(5*Math.random());case 3:return 150*n;case 4:return"\u653b\u51fb\u529b"}case 1:switch(t){case 0:return"\u5934\u76d4";case 1:return 110*n+Math.floor(10*Math.random());case 2:return 18*n+Math.floor(5*Math.random());case 3:return 180*n;case 4:return"\u9632\u5fa1\u529b"}case 2:switch(t){case 0:return"\u94e0\u7532";case 1:return 80*n+Math.floor(10*Math.random());case 2:return 20*n+Math.floor(5*Math.random());case 3:return 120*n;case 4:return"\u56de\u590d\u529b"}case 3:switch(t){case 0:return"\u978b\u5b50";case 1:return 90*n+Math.floor(10*Math.random());case 2:return 28*n+Math.floor(5*Math.random());case 3:return 115*n;case 4:return"\u6cbb\u6108\u529b"}}},t.prototype.getItemName=function(e){switch(e){case 0:return"\u9ad8\u7ea7\u7ecf\u9a8c\u4e66";case 1:return"\u521d\u7ea7\u7ecf\u9a8c\u4e66";case 2:return"\u788e\u7247\u793c\u76d2";case 3:return"\u88c5\u5907\u953b\u9020\u77f3";case 4:return"\u5b59\u5c1a\u9999\u788e\u7247";case 5:return"\u9646\u900a\u788e\u7247";case 6:return"\u5f20\u8fbd\u788e\u7247";case 7:return"\u5415\u5e03\u788e\u7247"}},t.prototype.getHeroSyntheicNum=function(e){switch(e){case 4:return 20;case 5:return 50;case 6:return 80;case 7:return 120}},t.prototype.bossConfig=function(e){switch(e){case 1:return[1];case 2:return[0,1,2,3,4,5]}},t.prototype.transcriptConfig=function(e){switch(e){case 1:return[1,0,0,0,0,0];case 2:return[2,1,0,0,0]}},t.prototype.getEnemyInfo=function(e){switch(e){case 0:return"\u7518\u5b81";case 1:return"\u53f8\u9a6c\u61ff";case 2:return"\u8340\u6538";case 3:return"\u8d3e\u8be9";case 4:return"\u8bf8\u845b\u4eae";case 5:return"\u5f20\u8fbd";case 6:return"\u5f90\u76db";case 7:return"\u66f9\u64cd"}},t.prototype.numToString=function(e){var t,n;return e<1e4?(n=""==(n=(t=Math.floor(10*e+.5)+"").slice(0,-1))?"0":n)+"."+t.slice(-1):e<1e8?(n=""==(n=(t=Math.floor(e/1e3+.5)+"").slice(0,-1))?"0":n)+"."+t.slice(-1)+"\u4e07":void 0},t.instance=null,__decorate([o(cc.Label)],t.prototype,"label",void 0),t=n=__decorate([i],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./UiManager":"UiManager"}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"a01cdb1a1lJNpIbX19PwZrQ","GameManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./UiManager"),r=e("./DataManager"),i=cc._decorator,o=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.equipmentPrefab=null,t.equipmentPool=null,t.effectPrefabArray=[],t.effectPoolArray=[],t.bossImgArr=[],t.bossPanel=null,t.playerCamp=null,t.enemyCamp=null,t.tempCamp=null,t.tempNode=null,t.effectParent=null,t.bossLevelId=1,t.transcriptLevelId=1,t.fightModel=0,t.tempPlayerArr=[],t.tempEnemyArr=[],t.tempHeroIndex=0,t.tempEnemyIndex=0,t.moveSpeed=30,t.waitTime=.8,t.isSkip=!1,t.currentIndex=0,t.heroImgIsScroll=!1,t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this,cc.game.setFrameRate(30),this.initGame()},t.prototype.initGame=function(){this.initPool(),this.playerCamp=this.bossPanel.getChildByName("playerCamp"),this.enemyCamp=this.bossPanel.getChildByName("enemyCamp"),this.tempCamp=this.bossPanel.getChildByName("tempCamp"),this.tempNode=this.bossPanel.getChildByName("tempNode"),this.effectParent=this.bossPanel.getChildByName("effectParent"),this.emptyBossScene()},t.prototype.initPool=function(){this.equipmentPool=new cc.NodePool;for(var e=0;e<2;e++)this.equipmentPool.put(cc.instantiate(this.equipmentPrefab));for(e=0;e<this.effectPrefabArray.length;e++)this.effectPoolArray[e]=new cc.NodePool;for(e=0;e<this.effectPrefabArray.length;e++)this.effectPoolArray[e].put(cc.instantiate(this.effectPrefabArray[e]))},t.prototype.getDegree=function(e,t){var n=t.x-e.x,a=t.y-e.y,r=180*Math.atan(n/a)/Math.PI;return a<0&&(r=n<0?180+Math.abs(r):180-Math.abs(r)),r},t.prototype.getDistance=function(e,t){var n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)},t.prototype.destroyNode=function(e,t){t.put(e)},t.prototype.getEquipment=function(e){for(var t=0;t<e;t++){if(a.default.getInstance().currentBpEquipArr.length>=r.default.getInstance().backPackCapacity)return void console.log("\u80cc\u5305\u5df2\u6ee1");if(this.equipmentPool.size()>0)var n=this.equipmentPool.get();else n=cc.instantiate(this.equipmentPrefab);n.parent=a.default.getInstance().equipmentGrid;var i=Math.floor(4*Math.random());n.getChildByName("img").getComponent(cc.Sprite).spriteFrame=a.default.getInstance().equipImgArr[i];var o=r.default.getInstance().getEqipNameFromId(i,0,0);n.getChildByName("name").getComponent(cc.Label).string=o+"",this.getItemTips(o,1),n.name=i.toString(),a.default.getInstance().currentBpEquipArr.push(i),a.default.getInstance().backpackPanel.getChildByName("backPackCapacity").children[1].getComponent(cc.Label).string=a.default.getInstance().currentBpEquipArr.length+"/"+r.default.getInstance().backPackCapacity}r.default.getInstance().saveDataToLocal(3)},t.prototype.getItemTips=function(e,t){var n=this;if(a.default.getInstance().itemTipsPool.size()>0)var r=a.default.getInstance().itemTipsPool.get();else r=cc.instantiate(a.default.getInstance().itemTipsPrefab);r.parent=a.default.getInstance().node.getChildByName("tipsParent").getChildByName("itemTipsParent"),r.position=cc.v2(0,219),r.opacity=255,r.children[0].getComponent(cc.RichText).string="<>"+e+"</c><color=#0fffff>*"+t+"</color>";var i=cc.fadeOut(2),o=cc.callFunc(function(){n.destroyNode(r,a.default.getInstance().itemTipsPool)},this);r.runAction(cc.sequence(i,o))},t.prototype.initBossScene=function(){for(var e,t=(e=0==this.fightModel?r.default.getInstance().bossConfig(this.bossLevelId):r.default.getInstance().transcriptConfig(this.transcriptLevelId)).length,n=this.enemyCamp.childrenCount,i=0;i<n;i++)i<t&&(this.enemyCamp.children[i].active=!0,this.tempEnemyArr.push(this.enemyCamp.children[i]),this.enemyCamp.children[i].getChildByName("img").getComponent(cc.Sprite).spriteFrame=this.bossImgArr[e[i]],this.enemyCamp.children[i].getChildByName("name").getComponent(cc.Label).string=r.default.getInstance().getEnemyInfo(e[i]));this.playerCamp.children[0].active=!0,this.playerCamp.children[0].getChildByName("name").getComponent(cc.Label).string=a.default.getInstance().currentPlayerProperty.name,this.tempPlayerArr.push(this.playerCamp.children[0]);for(i=0;i<2;i++)0!=a.default.getInstance().currentHeroLockArr[i]&&(this.playerCamp.children[i+1].active=!0,this.tempPlayerArr.push(this.playerCamp.children[i+1]))},t.prototype.emptyBossScene=function(){for(var e=this.playerCamp.childrenCount,t=this.enemyCamp.childrenCount,n=0;n<e;n++)this.playerCamp.children[n].active=!1;for(n=0;n<t;n++)this.enemyCamp.children[n].active=!1},t.prototype.enterFightingScene=function(){this.emptyBossScene(),this.sortChildNode(this.playerCamp),this.sortChildNode(this.enemyCamp),this.bossPanel.active=!0,this.bossPanel.getChildByName("bossAni").active=!0,this.bossPanel.getChildByName("bossAni").getComponent(cc.Animation).play(),this.scheduleOnce(this.prepareScene,2)},t.prototype.prepareScene=function(){this.initBossScene(),this.isSkip=!1,this.heroFighting()},t.prototype.heroFighting=function(){var e=this;if(!this.isSkip){var t;this.tempHeroIndex>=this.tempPlayerArr.length&&(this.tempHeroIndex=0);var i=this.tempPlayerArr[this.tempHeroIndex],o=i.position,c=i.getChildByName("name").getComponent(cc.Label).string;t=c==a.default.getInstance().currentPlayerProperty.name?a.default.getInstance().currentPlayerProperty.atkType:r.default.getInstance().configArr[r.default.getInstance().nameArr.indexOf(c)].atkType;var s=this.getRandomTarget(this.tempEnemyArr);if(s.parent=this.tempCamp,i.parent=this.tempCamp,0==t){var l=cc.v2(s.x+20,s.y-100),p=n.getInstance().getDistance(i.position,s.position)/(50*this.moveSpeed),h=cc.moveTo(p,l);i.runAction(cc.sequence(h,cc.callFunc(function(){var e=this;this.effectPlay(s,2),i.getChildByName("img").getComponent(cc.Animation).play("hit1"),s.getChildByName("img").getComponent(cc.Animation).play("attaked1"),this.scheduleOnce(function(){i.parent=e.playerCamp,s.parent=e.enemyCamp,i.position=o,e.enemyFighting()},this.waitTime)},this)))}else this.effectPlay(i,0),this.effectPlay(s,1),i.getChildByName("img").getComponent(cc.Animation).play("hit"),s.getChildByName("img").getComponent(cc.Animation).play("attaked1"),this.scheduleOnce(function(){i.parent=e.playerCamp,s.parent=e.enemyCamp,e.enemyFighting()},this.waitTime);this.tempHeroIndex+=1}},t.prototype.enemyFighting=function(){var e=this;if(!this.isSkip){var t;this.tempEnemyIndex>=this.tempEnemyArr.length&&(this.tempEnemyIndex=0);var a=this.tempEnemyArr[this.tempEnemyIndex],i=a.position,o=a.getChildByName("name").getComponent(cc.Label).string;t=r.default.getInstance().configArr[r.default.getInstance().nameArr.indexOf(o)].atkType;var c=this.getRandomTarget(this.tempPlayerArr);if(a.parent=this.tempCamp,c.parent=this.tempCamp,0==t){var s=cc.v2(c.x-20,c.y+100),l=n.getInstance().getDistance(c.position,a.position)/(50*this.moveSpeed),p=cc.moveTo(l,s);a.runAction(cc.sequence(p,cc.callFunc(function(){var e=this;this.effectPlay(c,3),a.getChildByName("img").getComponent(cc.Animation).play("hit2"),c.getChildByName("img").getComponent(cc.Animation).play("attaked"),this.scheduleOnce(function(){c.parent=e.playerCamp,a.parent=e.enemyCamp,a.position=i,e.heroFighting()},this.waitTime)},this)))}else this.effectPlay(a,0),this.effectPlay(c,1),a.getChildByName("img").getComponent(cc.Animation).play("hit"),c.getChildByName("img").getComponent(cc.Animation).play("attaked"),this.scheduleOnce(function(){c.parent=e.playerCamp,a.parent=e.enemyCamp,e.heroFighting()},this.waitTime);this.tempEnemyIndex+=1}},t.prototype.getRandomTarget=function(e){var t=e.length,n=Math.floor(Math.random()*t);return this.currentIndex=n,e[n]},t.prototype.getEffectType=function(e){if(this.effectPoolArray[e].size()>0)var t=this.effectPoolArray[e].get();else t=cc.instantiate(this.effectPrefabArray[e]);return t},t.prototype.effectPlay=function(e,t){var n=this,a=this.getEffectType(t);a.parent=this.effectParent,a.position=cc.v2(e.position.x,e.position.y),a.getComponent(cc.Animation).play(),this.scheduleOnce(function(){n.destroyNode(a,n.effectPoolArray[t])},2)},t.prototype.skipBtnClick=function(){this.unschedule(this.prepareScene),this.isSkip=!0,this.tempEnemyIndex=0,this.tempHeroIndex=0,this.tempPlayerArr=[],this.tempEnemyArr=[],this.bossPanel.active=!1},t.prototype.playerUnderAttack=function(e){},t.prototype.sortChildNode=function(e){for(var t=e.childrenCount,n=0;n<t;n++)e.children[0].parent=this.tempNode;for(n=0;n<t;n++)for(var a=0;a<this.tempNode.childrenCount;a++){var r=this.tempNode.children[a].name,i=r.substr(r.length-1,1);parseInt(i)-1==n&&(this.tempNode.children[a].parent=e)}},t.instance=null,__decorate([c(cc.Prefab)],t.prototype,"equipmentPrefab",void 0),__decorate([c(cc.Prefab)],t.prototype,"effectPrefabArray",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"bossImgArr",void 0),__decorate([c(cc.Node)],t.prototype,"bossPanel",void 0),t=n=__decorate([o],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./DataManager":"DataManager","./UiManager":"UiManager"}],MapScroll:[function(e,t,n){"use strict";cc._RF.push(t,"3d899/JEUdD6bMMGzPIxOu8","MapScroll"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),r=cc._decorator,i=r.ccclass,o=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundNode=[],t.mapScrollSpeed=1.2,t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this},t.prototype.bgScroll=function(){this.backgroundNode[0].x-=this.mapScrollSpeed/2,this.backgroundNode[1].x-=this.mapScrollSpeed/2,this.backgroundNode[0].x<-2555&&(this.backgroundNode[0].x=this.backgroundNode[1].x+2250),this.backgroundNode[1].x<-2555&&(this.backgroundNode[1].x=this.backgroundNode[0].x+2250)},t.prototype.update=function(e){a.default.getInstance().heroImgIsScroll&&this.bgScroll()},t.instance=null,__decorate([o(cc.Node)],t.prototype,"backgroundNode",void 0),t=n=__decorate([i],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameManager":"GameManager"}],MonsterManager:[function(e,t,n){"use strict";cc._RF.push(t,"9c8e3540nhCQ51foWximuzk","MonsterManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=a.property,o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roundMonsterPreArray=[],t.roundMonsterPool=[],t.playerAIPreArray=[],t.playerAIPool=[],t.dieEffectPrefab=null,t.dieEffectPool=null,t.skillEffectPrefab=null,t.skillEffectPool=null,t.aiTitleImg=[],t.effectParent=null,t.maxPos_x=944,t.maxPos_y=1106,t.minPos_x=206,t.minPos_y=439,t.monsterNum=12,t.playerAINum=3,t.tempMonsterArr=[],t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this;for(var e=0;e<this.roundMonsterPreArray.length;e++)this.roundMonsterPool[e]=new cc.NodePool;for(var t=0;t<this.roundMonsterPreArray.length;t++)for(var a=0;a<2;a++)this.roundMonsterPool[t].put(cc.instantiate(this.roundMonsterPreArray[t]));for(var r=0;r<this.playerAIPreArray.length;r++)this.playerAIPool[r]=new cc.NodePool;for(var i=0;i<this.playerAIPreArray.length;i++)for(a=0;a<2;a++)this.playerAIPool[i].put(cc.instantiate(this.playerAIPreArray[i]));this.dieEffectPool=new cc.NodePool,this.skillEffectPool=new cc.NodePool;for(var o=0;o<3;o++)this.dieEffectPool.put(cc.instantiate(this.dieEffectPrefab)),this.skillEffectPool.put(cc.instantiate(this.skillEffectPrefab))},t.prototype.start=function(){for(var e=0;e<this.monsterNum;e++)this.createRoundMonster();for(e=0;e<this.playerAINum;e++)this.createPlayerAI()},t.prototype.createRoundMonster=function(){if(this.roundMonsterPool[0].size()>0)var e=this.roundMonsterPool[0].get();else e=cc.instantiate(this.roundMonsterPreArray[0]);var t=Math.random()*(this.maxPos_y-this.minPos_y)+this.minPos_y,n=Math.random()*(this.maxPos_x-this.minPos_x)+this.minPos_x;e.parent=this.node,e.position=cc.v2(n,t),e.children[0].getComponent("Monster").initMonster()},t.prototype.createPlayerAI=function(){var e=Math.floor(2*Math.random())+1;if(this.playerAIPool[e-1].size()>0)var t=this.playerAIPool[e-1].get();else t=cc.instantiate(this.playerAIPreArray[e-1]);var n=Math.random()*(this.maxPos_y-this.minPos_y)+this.minPos_y,a=Math.random()*(this.maxPos_x-this.minPos_x)+this.minPos_x;t.parent=this.node,t.position=cc.v2(a,n),t.children[0].getComponent("PlayerAi").type=e-1,t.children[0].getComponent("PlayerAi").initPlayerAI()},t.instance=null,__decorate([i(cc.Prefab)],t.prototype,"roundMonsterPreArray",void 0),__decorate([i(cc.Prefab)],t.prototype,"playerAIPreArray",void 0),__decorate([i(cc.Prefab)],t.prototype,"dieEffectPrefab",void 0),__decorate([i(cc.Prefab)],t.prototype,"skillEffectPrefab",void 0),__decorate([i(cc.SpriteFrame)],t.prototype,"aiTitleImg",void 0),__decorate([i(cc.Node)],t.prototype,"effectParent",void 0),t=n=__decorate([r],t)}(cc.Component);n.default=o,cc._RF.pop()},{}],Monster:[function(e,t,n){"use strict";cc._RF.push(t,"24c63OM6yZF5LDfzydCC1Hr","Monster"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MonsterManager"),r=e("./GameManager"),i=e("./Player"),o=cc._decorator,c=o.ccclass,s=(o.property,cc.Enum({idle:0,front_L:1,front_R:2,behind_L:3,behind_R:4})),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stopTime=10,t.moveTime=15,t.speedX=1,t.speedY=1,t.timeCounter1=0,t.timeCounter2=0,t.monster_state=s.idle,t.lastTime_state=s.idle,t.animationName=null,t.atkAniName=null,t.isAtk=!1,t.monsterSpeed=2,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.initMonster=function(){this.stopTime=10,this.moveTime=15,this.speedX=1,this.speedY=1,this.timeCounter1=0,this.timeCounter2=0,this.monster_state=s.idle,this.lastTime_state=s.idle,this.animationName=null,this.atkAniName=null,this.isAtk=!1,this.monsterSpeed=2,this.node.active=!0,this.change()},t.prototype.update=function(e){if(!this.isAtk){if(this.timeCounter1+=e,this.timeCounter1<this.moveTime){this.lastTime_state=this.monster_state;var t=r.default.getInstance().getDegree(cc.v2(0,0),cc.v2(this.speedX,this.speedY));this.getClickAngle(t),this.getAnimationName();var n=this.node.getComponent(cc.Animation).getAnimationState(this.atkAniName).isPlaying;(this.lastTime_state!=this.monster_state||n)&&this.node.getComponent(cc.Animation).play(this.animationName),this.node.parent.x+=this.speedX,this.node.parent.y+=this.speedY}else{var a=this.node.getComponent(cc.Animation).getAnimationState(this.atkAniName);null==a||a.isPlaying||this.node.getComponent(cc.Animation).play(this.atkAniName),this.timeCounter2+=e,this.timeCounter2>this.stopTime&&(this.change(),this.timeCounter1=0,this.timeCounter2=0,this.lastTime_state=s.idle)}this.check(),this.checkDisWithPlayer()}},t.prototype.change=function(){this.stopTime=1*Math.random()+1,this.moveTime=5*Math.random()+8,this.speedX=1*Math.random()+1,this.speedY=1*Math.random()+1},t.prototype.check=function(){this.node.parent.x>a.default.getInstance().maxPos_x&&(this.speedX=-this.speedX,this.node.parent.x=a.default.getInstance().maxPos_x),this.node.parent.x<a.default.getInstance().minPos_x&&(this.speedX=-this.speedX,this.node.parent.x=a.default.getInstance().minPos_x),this.node.parent.y>a.default.getInstance().maxPos_y&&(this.speedY=-this.speedY,this.node.parent.y=a.default.getInstance().maxPos_y),this.node.parent.y<a.default.getInstance().minPos_y&&(this.speedY=-this.speedY,this.node.parent.y=a.default.getInstance().minPos_y)},t.prototype.getClickAngle=function(e){e>=-90&&e<0?this.monster_state=s.behind_L:e>=0&&e<90?this.monster_state=s.behind_R:e>=90&&e<180?this.monster_state=s.front_R:e>=180&&e<270&&(this.monster_state=s.front_L)},t.prototype.getAnimationName=function(){switch(this.monster_state){case 1:this.animationName="run1",this.atkAniName="atk1",this.node.scaleX=-1;break;case 2:this.animationName="run1",this.atkAniName="atk1",this.node.scaleX=1;break;case 3:this.animationName="run2",this.atkAniName="atk2",this.node.scaleX=-1;break;case 4:this.animationName="run2",this.atkAniName="atk2",this.node.scaleX=1}},t.prototype.checkDisWithPlayer=function(){var e=this;if(i.default.getInstance().isAtk){var t=i.default.getInstance().maxDistance,n=i.default.getInstance();if(r.default.getInstance().getDistance(n.node.parent,this.node.parent)<t){var o=i.default.getInstance().getNearestNode(this.node.parent);if(null!=o){this.isAtk=!0,a.default.getInstance().tempMonsterArr.length<8&&a.default.getInstance().tempMonsterArr.push(e.node.parent);var c=r.default.getInstance().getDistance(o,this.node.parent),s=r.default.getInstance().getDegree(this.node.parent,o);this.getClickAngle(s),this.getAnimationName(),this.node.getComponent(cc.Animation).play(this.animationName);var l=c/(50*this.monsterSpeed),p=cc.moveTo(l,o);this.node.parent.runAction(cc.sequence(p,cc.callFunc(function(){var t=r.default.getInstance().getDegree(e.node.parent,i.default.getInstance().node.parent);e.getClickAngle(t),e.getAnimationName(),e.node.getComponent(cc.Animation).play(e.atkAniName)})))}}}},t.prototype.monsterAtkNum=function(){var e=this.node.parent.getChildByName("atkNum");e.getComponent(cc.Label).string=Math.floor(1e3*Math.random())+9e3+"",e.getComponent(cc.Animation).play()},t=__decorate([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameManager":"GameManager","./MonsterManager":"MonsterManager","./Player":"Player"}],PlayerAi:[function(e,t,n){"use strict";cc._RF.push(t,"c16c0BwOuNOP7hAM0H3rlLu","PlayerAi"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MonsterManager"),r=e("./GameManager"),i=e("./DataManager"),o=cc._decorator,c=o.ccclass,s=(o.property,cc.Enum({idle:0,front_L:1,front_R:2,behind_L:3,behind_R:4})),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stopTime=10,t.moveTime=15,t.speedX=1,t.speedY=1,t.timeCounter1=0,t.timeCounter2=0,t.playerAI_state=s.idle,t.lastTime_state=s.idle,t.animationName=null,t.atkAniName=null,t.isAtk=!1,t.playerAISpeed=2,t.type=0,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.initPlayerAI=function(){this.stopTime=10,this.moveTime=15,this.speedX=1,this.speedY=1,this.timeCounter1=0,this.timeCounter2=0,this.playerAI_state=s.idle,this.lastTime_state=s.idle,this.animationName=null,this.atkAniName=null,this.isAtk=!1,this.playerAISpeed=2,this.change(),this.randomImgAndName()},t.prototype.update=function(e){if(!this.isAtk){if(this.timeCounter1+=e,this.timeCounter1<this.moveTime){this.lastTime_state=this.playerAI_state;var t=r.default.getInstance().getDegree(cc.v2(0,0),cc.v2(this.speedX,this.speedY));this.getClickAngle(t),this.getAnimationName();var n=this.node.getComponent(cc.Animation).getAnimationState(this.atkAniName).isPlaying;(this.lastTime_state!=this.playerAI_state||n)&&this.node.getComponent(cc.Animation).play(this.animationName),this.node.parent.x+=this.speedX,this.node.parent.y+=this.speedY}else{this.node.getComponent(cc.Animation).getAnimationState(this.atkAniName).isPlaying||this.node.getComponent(cc.Animation).play(this.atkAniName),this.timeCounter2+=e,this.timeCounter2>this.stopTime&&(this.change(),this.timeCounter1=0,this.timeCounter2=0,this.lastTime_state=s.idle)}this.check()}},t.prototype.change=function(){this.stopTime=1*Math.random()+1.3,this.moveTime=5*Math.random()+5,this.speedX=1*Math.random()+1,this.speedY=1*Math.random()+1},t.prototype.check=function(){var e=!1;this.node.parent.x>a.default.getInstance().maxPos_x&&(this.speedX=-this.speedX,this.node.parent.x=a.default.getInstance().maxPos_x),this.node.parent.x<a.default.getInstance().minPos_x&&(this.speedX=-this.speedX,this.node.parent.x=a.default.getInstance().minPos_x),this.node.parent.y>a.default.getInstance().maxPos_y&&(this.speedY=-this.speedY,this.node.parent.y=a.default.getInstance().maxPos_y),this.node.parent.y<a.default.getInstance().minPos_y&&(this.speedY=-this.speedY,this.node.parent.y=a.default.getInstance().minPos_y,e=!0),e&&(r.default.getInstance().destroyNode(this.node.parent,a.default.getInstance().playerAIPool[this.type]),a.default.getInstance().createPlayerAI())},t.prototype.getClickAngle=function(e){e>=-90&&e<0?this.playerAI_state=s.behind_L:e>=0&&e<90?this.playerAI_state=s.behind_R:e>=90&&e<180?this.playerAI_state=s.front_R:e>=180&&e<270&&(this.playerAI_state=s.front_L)},t.prototype.getAnimationName=function(){switch(this.playerAI_state){case 1:this.animationName="run1",this.atkAniName="atk1",this.node.scaleX=-1;break;case 2:this.animationName="run1",this.atkAniName="atk1",this.node.scaleX=1;break;case 3:this.animationName="run2",this.atkAniName="atk2",this.node.scaleX=-1;break;case 4:this.animationName="run2",this.atkAniName="atk2",this.node.scaleX=1}},t.prototype.randomImgAndName=function(){var e=this.node.parent.getChildByName("topImg"),t=a.default.getInstance().aiTitleImg.length,n=Math.floor(Math.random()*t);e.getChildByName("img").getComponent(cc.Sprite).spriteFrame=a.default.getInstance().aiTitleImg[n],e.getChildByName("name").getComponent(cc.Label).string=i.default.getInstance().node.getComponent("RandomName").initName()},t=__decorate([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./DataManager":"DataManager","./GameManager":"GameManager","./MonsterManager":"MonsterManager"}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"526f2JnCYdEg701aaeD/J2N","Player"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),r=e("./MonsterManager"),i=e("./UiManager"),o=e("./DataManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=cc.Enum({idle:0,front_L:1,front_R:2,behind_L:3,behind_R:4}),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.player_state=p.idle,t.playerSpeed=5,t.rotationAngle=0,t.animationName=null,t.atkAniName=null,t.idleAniName=null,t.playerAction=null,t.isMove=!1,t.acionIsOver=!1,t.moveTime=6,t.speedX=2,t.speedY=2,t.timeCounter1=0,t.lastTime_state=p.idle,t.tempPosArr=[],t.tempPosIndex=0,t.skew1=100,t.skew2=140,t.maxDistance=300,t.atkTimes=0,t.isAtk=!1,t.interval=0,t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this},t.prototype.start=function(){},t.prototype.playerClickMove=function(){this.background.on(cc.Node.EventType.TOUCH_END,function(e){this.playerAni(e)},this)},t.prototype.playerAni=function(e){var t=this.node.parent.parent.convertToWorldSpaceAR(this.node.position);this.isMove?(this.acionIsOver=!1,cc.director.getActionManager().removeAllActionsFromTarget(this.node.parent,!0),this.playerMoveTo(t,e.touch._point)):(this.isMove=!0,this.playerMoveTo(t,e.touch._point))},t.prototype.playerMoveTo=function(e,t){var n=this,r=this.player_state;this.rotationAngle=a.default.getInstance().getDegree(e,t),this.getClickAngle(this.rotationAngle),this.getAnimationName(),(r!=this.player_state||n.acionIsOver)&&this.node.getComponent(cc.Animation).play(this.animationName);var i=this.node.parent.parent.convertToNodeSpaceAR(e),o=n.node.parent.parent.convertToNodeSpaceAR(t),c=cc.v2(i.x-o.x,i.y-o.y).mag()/(50*this.playerSpeed);this.playerAction=cc.moveTo(c,o),this.node.parent.runAction(cc.sequence(this.playerAction,cc.callFunc(function(){n.node.getComponent(cc.Animation).play(this.idleAniName),n.isMove=!1,n.acionIsOver=!0},this)))},t.prototype.getClickAngle=function(e){e>=-90&&e<0?this.player_state=p.behind_L:e>=0&&e<90?this.player_state=p.behind_R:e>=90&&e<180?this.player_state=p.front_R:e>=180&&e<270&&(this.player_state=p.front_L)},t.prototype.getAnimationName=function(){switch(this.player_state){case 1:this.animationName="run1",this.idleAniName="idle1",this.atkAniName="atk1",this.node.scaleX=-1;break;case 2:this.animationName="run1",this.idleAniName="idle1",this.atkAniName="atk1",this.node.scaleX=1;break;case 3:this.animationName="run2",this.idleAniName="idle2",this.atkAniName="atk2",this.node.scaleX=-1;break;case 4:this.animationName="run2",this.idleAniName="idle2",this.atkAniName="atk2",this.node.scaleX=1}},t.prototype.update=function(e){var t=this;if(!this.isAtk){if(this.timeCounter1+=e,this.timeCounter1<this.moveTime){this.lastTime_state=this.player_state;var n=a.default.getInstance().getDegree(cc.v2(0,0),cc.v2(this.speedX,this.speedY));this.getClickAngle(n),this.getAnimationName();var r=this.node.getComponent(cc.Animation).getAnimationState(this.animationName).isPlaying;this.lastTime_state==this.player_state&&r||this.node.getComponent(cc.Animation).play(this.animationName),this.node.parent.x+=this.speedX,this.node.parent.y+=this.speedY}else{this.getNearPlayerArr(),this.isAtk=!0,this.node.getComponent(cc.Animation).getAnimationState(this.idleAniName).isPlaying||this.node.getComponent(cc.Animation).play(this.idleAniName),this.schedule(function(){t.playerAttack()},1.4),this.change(),this.timeCounter1=0,this.lastTime_state=p.idle}this.check()}},t.prototype.change=function(){this.moveTime=4*Math.random()+2,this.speedX=1*Math.random()+1.8,this.speedY=1*Math.random()+1.8},t.prototype.check=function(){this.node.parent.x>r.default.getInstance().maxPos_x&&(this.speedX=-this.speedX,this.node.parent.x=r.default.getInstance().maxPos_x),this.node.parent.x<r.default.getInstance().minPos_x&&(this.speedX=-this.speedX,this.node.parent.x=r.default.getInstance().minPos_x),this.node.parent.y>r.default.getInstance().maxPos_y&&(this.speedY=-this.speedY,this.node.parent.y=r.default.getInstance().maxPos_y),this.node.parent.y<r.default.getInstance().minPos_y&&(this.speedY=-this.speedY,this.node.parent.y=r.default.getInstance().minPos_y)},t.prototype.getNearPlayerArr=function(){for(var e=-1;e<=1;e++)for(var t=-1;t<=1;t++)if(0!=e||0!=t){if(0==e||0==t)var n=this.node.parent.x+e*this.skew2,a=this.node.parent.y+t*this.skew2;else n=this.node.parent.x+e*this.skew1,a=this.node.parent.y+t*this.skew1;this.tempPosArr.push(cc.v2(n,a))}},t.prototype.emptyTempPosArr=function(){this.tempPosArr=[]},t.prototype.getNearestNode=function(e){var t=this.tempPosArr;if(0!=t.length){this.tempPosIndex=0;for(var n=t[0],r=0;r<t.length;r++){a.default.getInstance().getDistance(e,n)>a.default.getInstance().getDistance(e,t[r])&&(n=t[r],this.tempPosIndex=r)}return this.tempPosArr.splice(this.tempPosIndex,1),n}},t.prototype.playerAttack=function(){this.atkTimes+=1;var e=r.default.getInstance().tempMonsterArr;this.atkTimes>=3&&(this.atkTimes=0,this.unscheduleAllCallbacks(),0==e.length?(this.isAtk=!1,this.emptyTempPosArr()):this.skillEffect());if(0!=e.length){var t=e[Math.floor(Math.random()*e.length)].position,n=a.default.getInstance().getDegree(this.node.parent,t);this.getClickAngle(n),this.getAnimationName(),this.node.getComponent(cc.Animation).play(this.atkAniName)}},t.prototype.skillEffect=function(){var e=this;this.schedule(function(){if(r.default.getInstance().skillEffectPool.size()>0)var t=r.default.getInstance().skillEffectPool.get();else t=cc.instantiate(r.default.getInstance().skillEffectPrefab);t.parent=r.default.getInstance().effectParent;var n=200*Math.random()-100,i=5*Math.random()+200;t.position=cc.v2(e.node.parent.x+n,e.node.parent.y+i),t.scale=.5*Math.random()+.7;var o=t.scale;t.scaleX=[-1,1][Math.floor(2*Math.random())]*o,t.getComponent(cc.Animation).play();var c=t.getComponent(cc.Animation);c&&c.on("stop",function(e){e.detail;a.default.getInstance().destroyNode(t,r.default.getInstance().skillEffectPool)},e),e.interval=.1*Math.random()+.1,e.node.parent.parent.getChildByName("background").getComponent(cc.Animation).play()},this.interval,4),this.scheduleOnce(function(){e.dieEffect(),e.isAtk=!1,e.emptyTempPosArr()},.7)},t.prototype.dieEffect=function(){for(var e=r.default.getInstance().tempMonsterArr,t=e.length,n=0;n<t;n++){if(r.default.getInstance().dieEffectPool.size()>0)var i=r.default.getInstance().dieEffectPool.get();else i=cc.instantiate(r.default.getInstance().dieEffectPrefab);i.parent=r.default.getInstance().effectParent,i.position=e[n].position,e[n].children[0].getComponent("Monster").monsterAtkNum(),e[n].children[0].active=!1,i.getComponent(cc.Animation).play();var o=i.getComponent(cc.Animation);o&&o.on("stop",function(e){e.detail;a.default.getInstance().destroyNode(i,r.default.getInstance().dieEffectPool)},this)}this.scheduleOnce(function(){for(var e=0;e<t;e++)a.default.getInstance().destroyNode(r.default.getInstance().tempMonsterArr[0],r.default.getInstance().roundMonsterPool[0]),r.default.getInstance().tempMonsterArr.splice(0,1),r.default.getInstance().createRoundMonster()},.9),this.autoFightGetItem()},t.prototype.autoFightGetItem=function(){var e=Math.floor(100*Math.random())+o.default.getInstance().autoFightGetCoinNum,t=Math.floor(10*Math.random())+o.default.getInstance().autoFightGetExpNum;a.default.getInstance().getItemTips("\u83b7\u5f97\u91d1\u5e01",e),a.default.getInstance().getItemTips("\u83b7\u5f97\u7ecf\u9a8c",t),i.default.getInstance().addCoin(e),i.default.getInstance().addExp(t),a.default.getInstance().getEquipment(1)},t.instance=null,__decorate([l(cc.Node)],t.prototype,"background",void 0),t=n=__decorate([s],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./DataManager":"DataManager","./GameManager":"GameManager","./MonsterManager":"MonsterManager","./UiManager":"UiManager"}],RandomName:[function(e,t,n){"use strict";cc._RF.push(t,"6c4a3SzEGdAIaVQFW0DhVzj","RandomName"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.first_name=[],t.last_name=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.first_name=["\u8d75","\u94b1","\u5b59","\u674e","\u5468","\u5434","\u90d1","\u738b","\u51af","\u9648","\u891a","\u536b","\u848b","\u6c89","\u97e9","\u6768","\u6731","\u79e6","\u5c24","\u8bb8","\u8303","\u5f6d","\u90ce","\u6bb7","\u4f55","\u5415","\u65bd","\u5f20","\u5b54","\u66f9","\u4e25","\u534e","\u91d1","\u9b4f","\u9676","\u59dc","\u621a","\u8c22","\u90b9","\u55bb","\u67cf","\u6c34","\u7aa6","\u7ae0","\u4e91","\u82cf","\u6f58","\u845b","\u595a","\u9c81","\u97e6","\u660c","\u9a6c","\u82d7","\u51e4","\u82b1","\u65b9","\u4fde","\u4efb","\u8881","\u67f3","\u9146","\u9c8d","\u53f2","\u5510","\u8d39","\u5ec9","\u5c91","\u859b","\u96f7","\u8d3a","\u502a","\u6c64","\u6ed5","\u7f57","\u6bd5","\u90dd","\u90ac","\u5b89","\u5e38","\u4e50","\u4e8e","\u65f6","\u5085","\u76ae","\u535e","\u9f50","\u5eb7","\u4f0d","\u9980","\u5143","\u535c","\u987e","\u5b5f","\u5e73","\u9ec4","\u548c","\u7a46","\u8427","\u5c39","\u59da","\u90b5","\u6e5b","\u6c6a","\u7941","\u6bdb","\u79b9","\u72c4","\u7c73","\u8d1d","\u660e","\u81e7","\u8ba1","\u4f0f","\u6210","\u6234","\u8c08","\u5b8b","\u8305","\u5e9e","\u718a","\u7eaa","\u8212","\u5c48","\u9879","\u795d","\u8463","\u6881","\u675c","\u962e","\u84dd","\u95f5","\u5e2d","\u5b63","\u9ebb","\u5f3a","\u8d3e","\u8def","\u5a04","\u5371","\u6c5f","\u7ae5","\u989c","\u90ed","\u6885","\u76db","\u6797","\u5201","\u949f","\u5f90","\u90b1","\u9a86","\u9ad8","\u590f","\u8521","\u7530","\u6a0a","\u80e1","\u51cc","\u970d","\u865e","\u4e07","\u652f","\u67ef","\u661d","\u7ba1","\u5362","\u83ab","\u7ecf","\u623f","\u88d8","\u7f2a","\u5e72","\u89e3","\u5e94","\u5b97","\u4e01","\u5ba3","\u8d32","\u9093","\u90c1","\u5355","\u676d","\u6d2a","\u5305","\u8bf8","\u5de6","\u77f3","\u5d14","\u5409","\u94ae","\u9f9a","\u7a0b","\u5d47","\u90a2","\u6ed1","\u88f4","\u9646","\u8363","\u7fc1","\u8340","\u7f8a","\u4e8e","\u60e0","\u7504","\u66f2","\u5bb6","\u5c01","\u82ae","\u7fbf","\u50a8","\u9773","\u6c72","\u90b4","\u7cdc","\u677e","\u4e95","\u6bb5","\u5bcc","\u5deb","\u4e4c","\u7126","\u5df4","\u5f13","\u7267","\u9697","\u5c71","\u8c37","\u8f66","\u4faf","\u5b93","\u84ec","\u5168","\u90d7","\u73ed","\u4ef0","\u79cb","\u4ef2","\u4f0a","\u5bab","\u5b81","\u4ec7","\u683e","\u66b4","\u7518","\u94ad","\u5389","\u620e","\u7956","\u6b66","\u7b26","\u5218","\u666f","\u8a79","\u675f","\u9f99","\u53f6","\u5e78","\u53f8","\u97f6","\u90dc","\u9ece","\u84df","\u6ea5","\u5370","\u5bbf","\u767d","\u6000","\u84b2","\u90b0","\u4ece","\u9102","\u7d22","\u54b8","\u7c4d","\u8d56","\u5353","\u853a","\u5c60","\u8499","\u6c60","\u4e54","\u9634","\u9b31","\u80e5","\u80fd","\u82cd","\u53cc","\u95fb","\u8398","\u515a","\u7fdf","\u8c2d","\u8d21","\u52b3","\u9004","\u59ec","\u7533","\u6276","\u5835","\u5189","\u5bb0","\u90e6","\u96cd","\u5374","\u74a9","\u6851","\u6842","\u6fee","\u725b","\u5bff","\u901a","\u8fb9","\u6248","\u71d5","\u5180","\u6d66","\u5c1a","\u519c","\u6e29","\u522b","\u5e84","\u664f","\u67f4","\u77bf","\u960e","\u5145","\u6155","\u8fde","\u8339","\u4e60","\u5ba6","\u827e","\u9c7c","\u5bb9","\u5411","\u53e4","\u6613","\u614e","\u6208","\u5ed6","\u5ebe","\u7ec8","\u66a8","\u5c45","\u8861","\u6b65","\u90fd","\u803f","\u6ee1","\u5f18","\u5321","\u56fd","\u6587","\u5bc7","\u5e7f","\u7984","\u9619","\u4e1c","\u6b27","\u6bb3","\u6c83","\u5229","\u851a","\u8d8a","\u5914","\u9686","\u5e08","\u5de9","\u538d","\u8042","\u6641","\u52fe","\u6556","\u878d","\u51b7","\u8a3e","\u8f9b","\u961a","\u90a3","\u7b80","\u9976","\u7a7a","\u66fe","\u6bcb","\u6c99","\u4e5c","\u517b","\u97a0","\u987b","\u4e30","\u5de2","\u5173","\u84af","\u76f8","\u67e5","\u540e","\u8346","\u7ea2","\u6e38","\u90cf","\u7afa","\u6743","\u902f","\u76d6","\u76ca","\u6853","\u516c","\u4ec9","\u7763","\u5cb3","\u5e05","\u7f11","\u4ea2","\u51b5","\u90c8","\u6709","\u7434","\u5f52","\u6d77","\u664b","\u695a","\u95eb","\u6cd5","\u6c5d","\u9122","\u6d82","\u94a6","\u5546","\u725f","\u4f58","\u4f74","\u4f2f","\u8d4f","\u58a8","\u54c8","\u8c2f","\u7bc1","\u5e74","\u7231","\u9633","\u4f5f","\u8a00","\u798f","\u5357","\u706b","\u94c1","\u8fdf","\u6f06","\u5b98","\u51bc","\u771f","\u5c55","\u7e41","\u6a80","\u796d","\u5bc6","\u656c","\u63ed","\u821c","\u697c","\u758f","\u5192","\u6d51","\u631a","\u80f6","\u968f","\u9ad8","\u768b","\u539f","\u79cd","\u7ec3","\u5f25","\u4ed3","\u772d","\u8e47","\u8983","\u963f","\u95e8","\u607d","\u6765","\u7da6","\u53ec","\u4eea","\u98ce","\u4ecb","\u5de8","\u6728","\u4eac","\u72d0","\u90c7","\u864e","\u679a","\u6297","\u8fbe","\u675e","\u82cc","\u6298","\u9ea6","\u5e86","\u8fc7","\u7af9","\u7aef","\u9c9c","\u7687","\u4e93","\u8001","\u662f","\u79d8","\u7545","\u909d","\u8fd8","\u5bbe","\u95fe","\u8f9c","\u7eb5","\u4fb4","\u4e07\u4fdf","\u53f8\u9a6c","\u4e0a\u5b98","\u6b27\u9633","\u590f\u4faf","\u8bf8\u845b","\u95fb\u4eba","\u4e1c\u65b9","\u8d6b\u8fde","\u7687\u752b","\u7f8a\u820c","\u5c09\u8fdf","\u516c\u7f8a","\u6fb9\u53f0","\u516c\u51b6","\u5b97\u6b63","\u6fee\u9633","\u6df3\u4e8e","\u5355\u4e8e","\u592a\u53d4","\u7533\u5c60","\u516c\u5b59","\u4ef2\u5b59","\u8f69\u8f95","\u4ee4\u72d0","\u949f\u79bb","\u5b87\u6587","\u957f\u5b59","\u6155\u5bb9","\u9c9c\u4e8e","\u95fe\u4e18","\u53f8\u5f92","\u53f8\u7a7a","\u5140\u5b98","\u53f8\u5bc7","\u5357\u95e8","\u547c\u5ef6","\u5b50\u8f66","\u989b\u5b59","\u7aef\u6728","\u5deb\u9a6c","\u516c\u897f","\u6f06\u51cb","\u8f66\u6b63","\u58e4\u9a77","\u516c\u826f","\u62d3\u8dcb","\u5939\u8c37","\u5bb0\u7236","\u8c37\u6881","\u6bb5\u5e72","\u767e\u91cc","\u4e1c\u90ed","\u5fae\u751f","\u6881\u4e18","\u5de6\u4e18","\u4e1c\u95e8","\u897f\u95e8","\u5357\u5bab","\u7b2c\u4e94","\u516c\u4eea","\u516c\u4e58","\u592a\u53f2","\u4ef2\u957f","\u53d4\u5b59","\u5c48\u7a81","\u5c14\u6731","\u4e1c\u4e61","\u76f8\u88e1","\u80e1\u6bcd","\u53f8\u57ce","\u5f20\u5ed6","\u96cd\u95e8","\u6bcb\u4e18","\u8d3a\u5170","\u7da6\u6bcb","\u5c4b\u5e90","\u72ec\u5b64","\u5357\u90ed","\u5317\u5bab","\u738b\u5b59","\u7fbd","\u82b3","\u6708","\u82e5","\u53f1\u5412","\u9b54","\u5e7d","\u5415","\u4ed9"],this.last_name=["\u4f1f","\u521a","\u52c7","\u6bc5","\u4fca","\u5cf0","\u5f3a","\u519b","\u5e73","\u4fdd","\u4e1c","\u6587","\u8f89","\u529b","\u660e","\u6c38","\u5065","\u4e16","\u5e7f","\u5fd7","\u4e49","\u5174","\u826f","\u6d77","\u5c71","\u4ec1","\u6ce2","\u5b81","\u8d35","\u798f","\u751f","\u9f99","\u5143","\u5168","\u56fd","\u80dc","\u5b66","\u7965","\u624d","\u53d1","\u6b66","\u65b0","\u5229","\u6e05","\u98de","\u5f6c","\u5bcc","\u987a","\u4fe1","\u5b50","\u6770","\u6d9b","\u660c","\u6210","\u5eb7","\u661f","\u5149","\u5929","\u8fbe","\u5b89","\u5ca9","\u4e2d","\u8302","\u8fdb","\u6797","\u6709","\u575a","\u548c","\u5f6a","\u535a","\u8bda","\u5148","\u656c","\u9707","\u632f","\u58ee","\u4f1a","\u601d","\u7fa4","\u8c6a","\u5fc3","\u90a6","\u627f","\u4e50","\u7ecd","\u529f","\u677e","\u5584","\u539a","\u5e86","\u78ca","\u6c11","\u53cb","\u88d5","\u6cb3","\u54f2","\u6c5f","\u8d85","\u6d69","\u4eae","\u653f","\u8c26","\u4ea8","\u5947","\u56fa","\u4e4b","\u8f6e","\u7ff0","\u6717","\u4f2f","\u5b8f","\u8a00","\u82e5","\u9e23","\u670b","\u658c","\u6881","\u680b","\u7ef4","\u542f","\u514b","\u4f26","\u7fd4","\u65ed","\u9e4f","\u6cfd","\u6668","\u8fb0","\u58eb","\u4ee5","\u5efa","\u5bb6","\u81f4","\u6811","\u708e","\u5fb7","\u884c","\u65f6","\u6cf0","\u76db","\u96c4","\u741b","\u94a7","\u51a0","\u7b56","\u817e","\u6960","\u6995","\u98ce","\u822a","\u5f18","\u79c0","\u5a1f","\u82f1","\u534e","\u6167","\u5de7","\u7f8e","\u5a1c","\u9759","\u6dd1","\u60e0","\u73e0","\u7fe0","\u96c5","\u829d","\u7389","\u840d","\u7ea2","\u5a25","\u73b2","\u82ac","\u82b3","\u71d5","\u5f69","\u6625","\u83ca","\u5170","\u51e4","\u6d01","\u6885","\u7433","\u7d20","\u4e91","\u83b2","\u771f","\u73af","\u96ea","\u8363","\u7231","\u59b9","\u971e","\u9999","\u6708","\u83ba","\u5a9b","\u8c54","\u745e","\u51e1","\u4f73","\u5609","\u743c","\u52e4","\u73cd","\u8d1e","\u8389","\u6842","\u5a23","\u53f6","\u74a7","\u7490","\u5a05","\u7426","\u6676","\u598d","\u831c","\u79cb","\u73ca","\u838e","\u9526","\u9edb","\u9752","\u5029","\u5a77","\u59e3","\u5a49","\u5a34","\u747e","\u9896","\u9732","\u7476","\u6021","\u5a75","\u96c1","\u84d3","\u7ea8","\u4eea","\u8377","\u4e39","\u84c9","\u7709","\u541b","\u7434","\u854a","\u8587","\u83c1","\u68a6","\u5c9a","\u82d1","\u5a55","\u99a8","\u7457","\u7430","\u97f5","\u878d","\u56ed","\u827a","\u548f","\u537f","\u806a","\u6f9c","\u7eaf","\u6bd3","\u60a6","\u662d","\u51b0","\u723d","\u742c","\u8317","\u7fbd","\u5e0c","\u6b23","\u98d8","\u80b2","\u6ee2","\u99a5","\u7b60","\u67d4","\u7af9","\u972d","\u51dd","\u6653","\u6b22","\u9704","\u67ab","\u82b8","\u83f2","\u5bd2","\u4f0a","\u4e9a","\u5b9c","\u53ef","\u59ec","\u8212","\u5f71","\u8354","\u679d","\u4e3d","\u9633","\u59ae","\u5b9d","\u8d1d","\u521d","\u7a0b","\u68b5","\u7f61","\u6052","\u9e3f","\u6866","\u9a85","\u5251","\u5a07","\u7eaa","\u5bbd","\u82db","\u7075","\u739b","\u5a9a","\u742a","\u6674","\u5bb9","\u777f","\u70c1","\u5802","\u552f","\u5a01","\u97e6","\u96ef","\u82c7","\u8431","\u9605","\u5f66","\u5b87","\u96e8","\u6d0b","\u5fe0","\u5b97","\u66fc","\u7d2b","\u9038","\u8d24","\u8776","\u83e1","\u7eff","\u84dd","\u513f","\u7fe0","\u70df","\u5c0f","\u60dc","\u9738","\u4e3b","\u90e1","\u9b54","\u5e7d","\u591a","\u4ed9"]},t.prototype.start=function(){},t.prototype.initName=function(){return this.first_name[Math.floor(Math.random()*this.first_name.length)]+this.last_name[Math.floor(Math.random()*this.last_name.length)]},t=__decorate([r],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],UiManager:[function(e,t,n){"use strict";cc._RF.push(t,"9b7a8FPs0VMbYWwAYEXqAvS","UiManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),r=e("./DataManager"),i=cc._decorator,o=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuBtnParent=null,t.player=null,t.rolePanel=null,t.forgePanel=null,t.townPanel=null,t.backpackPanel=null,t.recruitingPanel=null,t.equipmentGrid=null,t.itemGrid=null,t.popPanel=null,t.currentPanel=null,t.currentBtn=null,t.lastPanel=null,t.bg_top=null,t.itemTipsPrefab=null,t.itemTipsPool=null,t.recycleEffectPrefab=null,t.recycleEffectPool=null,t.playerPropertyPanel=null,t.flyItemPrefabArray=[],t.flyItemPoolArray=[],t.heroIconArr=[],t.heroImgArr=[],t.forceImgArr=[],t.atkTypeImgArr=[],t.equipImgArr=[],t.currentHeroId=0,t.currentEquipIndex=0,t.currentBpEquipArr=[],t.currentBpItemArr=[],t.currentCoinNum=0,t.currentExpNum=0,t.currentItemsId=0,t.currentHeroProperty={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.currentHeroLockArr=[],t.currentPlayerProperty={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.hero1={level:0,attack:100,power:0,cure:0,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t.hero2={level:1,attack:100,power:100,cure:10,lifeValue:500,name:"",force:0,atkType:0,baoJi:100,baoJiRatio:.2,equipArray:[0,0,0,0],equipLevelArray:[0,0,0,0]},t}var n;return __extends(t,e),n=t,t.getInstance=function(){return n.instance},t.prototype.onLoad=function(){n.instance=this,this.initData(),this.initGame()},t.prototype.initData=function(){this.currentPlayerProperty=r.default.getInstance().playerProperty,this.hero1=r.default.getInstance().hero1,this.hero2=r.default.getInstance().hero2,this.currentHeroLockArr=r.default.getInstance().heroLockArr,this.currentBpEquipArr=r.default.getInstance().equipBackpackArr,this.currentBpItemArr=r.default.getInstance().itemBackpackArr,this.currentCoinNum=r.default.getInstance().coinNum,this.currentExpNum=r.default.getInstance().expNum},t.prototype.initGame=function(){this.bg_top=this.node.getChildByName("bg_top"),this.playerPropertyPanel=this.node.getChildByName("playerPropertyPanel"),this.popPanel=this.node.getChildByName("popPanel"),this.initMenuBtnClick(),this.initPool(),this.initCoinLabel(),this.initPlayerName(),this.initPlayerExp(),this.switchHero(this.rolePanel),this.switchHero(this.forgePanel),this.initBackPackEquip(),this.updateBackPackItem()},t.prototype.initPool=function(){var e=this;this.itemTipsPool=new cc.NodePool,this.recycleEffectPool=new cc.NodePool;for(var t=0;t<1;t++)this.itemTipsPool.put(cc.instantiate(this.itemTipsPrefab));this.schedule(function(){e.recycleEffectPool.put(cc.instantiate(e.recycleEffectPrefab))},.5,5,0)},t.prototype.initMenuBtnClick=function(){var e=this,t=this.menuBtnParent.getChildByName("btn_fighting"),n=this.menuBtnParent.getChildByName("btn_squad"),a=this.menuBtnParent.getChildByName("btn_forge"),r=this.menuBtnParent.getChildByName("btn_city"),i=this.menuBtnParent.getChildByName("btn_backpack"),o=this.menuBtnParent.getChildByName("btn_recruiting");this.currentBtn=t,t.on(cc.Node.EventType.TOUCH_END,function(){null!=e.currentPanel&&(e.currentPanel.active=!1,e.bg_top.active=!1),e.currentBtn.scale=1,e.currentBtn=t,e.currentBtn.scale=1.1},this),n.on(cc.Node.EventType.TOUCH_END,function(){e.displayPanel(e.rolePanel,n),e.defaultPlayerDisPlay()},this),a.on(cc.Node.EventType.TOUCH_END,function(){e.displayPanel(e.forgePanel,a),e.defaultPlayerDisPlay()},this),r.on(cc.Node.EventType.TOUCH_END,function(){e.displayPanel(e.townPanel,r),e.bg_top.active=!1},this),i.on(cc.Node.EventType.TOUCH_END,function(){e.displayPanel(e.backpackPanel,i)},this),o.on(cc.Node.EventType.TOUCH_END,function(){e.displayPanel(e.recruitingPanel,o)},this)},t.prototype.displayPanel=function(e,t){this.recruitingPanel,a.default.getInstance().heroImgIsScroll=!0,null!=this.currentPanel&&(this.currentPanel.active=!1),e.active=!0,this.currentPanel=e,this.currentBtn.scale=1,this.currentBtn=t,this.bg_top.active=!0,this.currentBtn.scale=1.1},t.prototype.initCoinLabel=function(){var e=[],t=this.playerPropertyPanel.getChildByName("bg_top").children[1].children[2],n=this.bg_top.children[1].children[2];e.push(t,n);for(var a=0;a<2;a++)e[a].getComponent(cc.Label).string=r.default.getInstance().numToString(this.currentCoinNum)},t.prototype.initPlayerExp=function(){var e=r.default.getInstance().getPlayerLevelFromExp(this.currentExpNum),t=15*(e-1)*(e-1)+85*(e-1),n=(this.currentExpNum-t)/(70+30*e);this.menuBtnParent.getChildByName("expProgress").children[0].getComponent(cc.Label).string=this.currentExpNum+" / "+(15*e*e+85*e),this.menuBtnParent.getChildByName("expProgress").getComponent(cc.Sprite).fillRange=n,this.playerPropertyPanel.getChildByName("levelNum").getComponent(cc.Label).string=r.default.getInstance().getPlayerLevelFromExp(this.currentExpNum)+"\u7ea7"},t.prototype.initPlayerName=function(){this.playerPropertyPanel.getChildByName("playerName").getComponent(cc.Label).string=this.currentPlayerProperty.name,this.player.getChildByName("topImg").getChildByName("name").getComponent(cc.Label).string=this.currentPlayerProperty.name},t.prototype.initBackPackEquip=function(){for(var e=0;e<this.currentBpEquipArr.length;e++){if(a.default.getInstance().equipmentPool.size()>0)var t=a.default.getInstance().equipmentPool.get();else t=cc.instantiate(a.default.getInstance().equipmentPrefab);var n=this.currentBpEquipArr[e];t.parent=this.equipmentGrid,t.getChildByName("img").getComponent(cc.Sprite).spriteFrame=this.equipImgArr[n];var i=r.default.getInstance().getEqipNameFromId(n,0,0);t.getChildByName("name").getComponent(cc.Label).string=i+"",t.name=n.toString()}this.updateBackPackCapacity()},t.prototype.updateBackPackCapacity=function(){this.backpackPanel.getChildByName("backPackCapacity").children[1].getComponent(cc.Label).string=this.currentBpEquipArr.length+"/"+r.default.getInstance().backPackCapacity},t.prototype.updateBackPackItem=function(){for(var e=0;e<8;e++)void 0==this.currentBpItemArr[e]&&(this.currentBpItemArr[e]=0),this.currentBpItemArr[e]<=0?(this.itemGrid.children[e].active=!1,void 0!=this.itemGrid.children[e].children[3]&&this.itemGrid.children[e].children[3].getComponent(cc.Animation).stop()):(this.itemGrid.children[e].active=!0,this.itemGrid.children[e].getChildByName("num").getComponent(cc.Label).string="x"+this.currentBpItemArr[e],void 0!=this.itemGrid.children[e].children[3]&&this.itemGrid.children[e].children[3].getComponent(cc.Animation).play());r.default.getInstance().saveDataToLocal(3)},t.prototype.addCoin=function(e){this.currentCoinNum+=e,this.initCoinLabel(),r.default.getInstance().saveDataToLocal(4)},t.prototype.addExp=function(e){this.currentExpNum+=e,this.initPlayerExp(),r.default.getInstance().saveDataToLocal(4)},t.prototype.panelReturnBtnClick=function(){null!=this.currentPanel&&(this.currentPanel.active=!1,this.bg_top.active=!1),this.currentBtn.scale=1,this.currentBtn=this.menuBtnParent.getChildByName("btn_fighting"),this.currentBtn.scale=1.1},t.prototype.switchHero=function(e){for(var t=this,n=e.getChildByName("heroGroup"),a=0;a<4;a++)n.children[a].on(cc.Node.EventType.TOUCH_END,function(e){var n=e.target.name,a=n.substr(n.length-1,1),r=t.currentHeroId;switch(t.currentHeroId=parseInt(a)-1,t.currentHeroId){case 0:t.currentHeroProperty=t.currentPlayerProperty,t.updateRolePanel(),t.updateForgePanel();break;case 1:0!=t.currentHeroLockArr[t.currentHeroId-1]?(t.currentHeroProperty=t.hero1,t.updateRolePanel(),t.updateForgePanel()):(t.popPanel.getChildByName("addHeroPanel").active=!0,t.currentHeroId=r);break;case 2:0!=t.currentHeroLockArr[t.currentHeroId-1]?(t.currentHeroProperty=t.hero2,t.updateRolePanel(),t.updateForgePanel()):(t.popPanel.getChildByName("addHeroPanel").active=!0,t.currentHeroId=r);break;case 3:t.popPanel.getChildByName("addHeroPanel").active=!0,t.currentHeroId=r}},this)},t.prototype.equipClickFun=function(e){var t=e.target.name,n=t.substr(t.length-1,1);this.currentEquipIndex=parseInt(n)-1,0==this.currentHeroProperty.equipArray[this.currentEquipIndex]&&console.log("\u8bf7\u5148\u83b7\u53d6\u88c5\u5907"),this.forgeEquipDisplay()},t.prototype.forgeEquipDisplay=function(){var e=this.forgePanel.getChildByName("forgeEquipPanel");if(this.forgePanel.getChildByName("equipNode").children[0].position=cc.v2(0,-131*(this.currentEquipIndex+1)),0==this.currentHeroProperty.equipArray[this.currentEquipIndex])e.active=!1;else{var t=this.currentHeroProperty.equipArray[this.currentEquipIndex];e.active=!0,e.getChildByName("equipImg").getComponent(cc.Sprite).spriteFrame=this.equipImgArr[this.currentEquipIndex],e.getChildByName("equipName").getComponent(cc.Label).string=r.default.getInstance().getEqipNameFromId(this.currentEquipIndex,0,1)+"",e.getChildByName("beforeForge").children[0].getComponent(cc.Label).string="\u5f3a\u5316"+t+"\u7ea7",e.getChildByName("beforeForge").children[1].getComponent(cc.Label).string=r.default.getInstance().getEqipNameFromId(this.currentEquipIndex,4,1)+"+"+12*t,e.getChildByName("afterForge").children[0].getComponent(cc.Label).string="\u5f3a\u5316"+(t+1)+"\u7ea7",e.getChildByName("afterForge").children[1].getComponent(cc.Label).string=r.default.getInstance().getEqipNameFromId(this.currentEquipIndex,4,1)+"+"+12*(t+1)}},t.prototype.defaultPlayerDisPlay=function(){this.currentHeroId=0,this.updateHeroDisPlay(),this.currentHeroProperty=this.currentPlayerProperty,this.updateRolePanel(),this.updateForgePanel();for(var e=this.rolePanel.getChildByName("heroGroup"),t=0;t<2;t++){for(var n=0;n<4;n++)e.children[n].children[1].active=0==n;e=this.forgePanel.getChildByName("heroGroup")}},t.prototype.updateHeroDisPlay=function(){for(var e=this.rolePanel.getChildByName("heroGroup"),t=0;t<2;t++){for(var n=1;n<4;n++)0==this.currentHeroLockArr[n-1]?(e.children[n].children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.heroIconArr[0],e.children[n].children[1].opacity=0):(e.children[n].children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.heroIconArr[n],e.children[n].children[1].opacity=255);e=this.forgePanel.getChildByName("heroGroup")}},t.prototype.updateRolePanel=function(){this.rolePanel.getChildByName("playerImg").getComponent(cc.Sprite).spriteFrame=this.heroImgArr[this.currentHeroId],this.rolePanel.getChildByName("playerName").children[0].getComponent(cc.Label).string=this.currentHeroProperty.name,this.rolePanel.getChildByName("fightNum").children[0].getComponent(cc.Label).string=this.currentHeroProperty.power+"",0==this.currentHeroId?this.rolePanel.getChildByName("kingdomTypeImg").active=!1:(this.rolePanel.getChildByName("kingdomTypeImg").active=!0,this.rolePanel.getChildByName("kingdomTypeImg").getComponent(cc.Sprite).spriteFrame=this.forceImgArr[this.currentHeroProperty.force]),this.rolePanel.getChildByName("attackTypeImg").getComponent(cc.Sprite).spriteFrame=this.atkTypeImgArr[this.currentHeroProperty.atkType];for(var e=this.rolePanel.getChildByName("equipGrid"),t=0;t<4;t++)0==this.currentHeroProperty.equipArray[t]?(e.children[t].getChildByName("item").active=!1,e.children[t].getChildByName("img_empty").active=!0):(e.children[t].getChildByName("item").active=!0,e.children[t].getChildByName("img_empty").active=!1),e.children[t].getChildByName("item").getChildByName("levelNum").getComponent(cc.Label).string="Lv."+this.currentHeroProperty.equipLevelArray[t],e.children[t].getChildByName("item").getChildByName("forgeNum").getComponent(cc.Label).string="+"+this.currentHeroProperty.equipArray[t]},t.prototype.updateForgePanel=function(){for(var e=this.forgePanel.getChildByName("equipNode"),t=1;t<5;t++)0==this.currentHeroProperty.equipArray[t-1]?(e.children[t].getChildByName("equip").active=!1,e.children[t].getChildByName("addImg").active=!0):(e.children[t].getChildByName("equip").active=!0,e.children[t].getChildByName("addImg").active=!1),e.children[t].getChildByName("equip").children[1].getComponent(cc.Label).string="\u5f3a\u5316"+this.currentHeroProperty.equipArray[t-1]+"\u7ea7";this.forgeEquipDisplay()},t.prototype.changePlayerRole=function(){for(var e=0;e<4;e++)if(this.currentBpEquipArr.indexOf(e)>-1&&0==this.currentHeroProperty.equipArray[e]){this.currentHeroProperty.equipArray[e]=1;var t=this.currentBpEquipArr.indexOf(e);this.currentBpEquipArr.splice(t,1),a.default.getInstance().destroyNode(this.equipmentGrid.children[0],a.default.getInstance().equipmentPool),r.default.getInstance().saveDataToLocal(3)}this.updateRolePanel(),this.updateBackPackCapacity(),r.default.getInstance().saveDataToLocal(1)},t.prototype.equipLevelUpBtnClick=function(){for(var e=0;e<4;e++)0==this.currentHeroProperty.equipArray[e]||(this.currentHeroProperty.equipLevelArray[e]+=1);this.updateRolePanel(),r.default.getInstance().saveDataToLocal(1)},t.prototype.equipForgeBtnClick=function(){this.currentHeroProperty.equipArray[this.currentEquipIndex]+=1,this.updateForgePanel(),r.default.getInstance().saveDataToLocal(1)},t.prototype.detailsBtnClick=function(){var e=this.rolePanel.getChildByName("detailsWindow");e.active=!0,0==this.currentHeroId?e.getChildByName("kingdomTypeImg").active=!1:(e.getChildByName("kingdomTypeImg").active=!0,e.getChildByName("kingdomTypeImg").getComponent(cc.Sprite).spriteFrame=this.forceImgArr[this.currentHeroProperty.force]),e.getChildByName("playerImg").getComponent(cc.Animation).play(),e.getChildByName("attackTypeImg").getComponent(cc.Sprite).spriteFrame=this.atkTypeImgArr[this.currentHeroProperty.atkType],e.getChildByName("playerImg").getComponent(cc.Sprite).spriteFrame=this.heroImgArr[this.currentHeroId],e.getChildByName("hpNum").getComponent(cc.Label).string=this.currentHeroProperty.lifeValue+"",e.getChildByName("hitNum").getComponent(cc.Label).string=this.currentHeroProperty.attack+"",e.getChildByName("defenseNum").getComponent(cc.Label).string=this.currentHeroProperty.cure+"",e.getChildByName("baojiNum").getComponent(cc.Label).string=this.currentHeroProperty.baoJi+"",e.getChildByName("baojilvNum").getComponent(cc.Label).string=this.currentHeroProperty.baoJiRatio+""},t.prototype.detailsCloseBtnClick=function(e){var t=e.target.parent;t.active=!1,t.getChildByName("playerImg").getComponent(cc.Animation).stop()},t.prototype.closeBtnClick=function(e){e.target.parent.active=!1},t.prototype.treasureBtnClick=function(e){this.popPanel.getChildByName("getTreasurePanel").active=!0},t.prototype.backPackEquipBtnClick=function(){this.equipmentGrid.active=!0,this.itemGrid.active=!1,this.backpackPanel.getChildByName("backPackCapacity").active=!0,this.backpackPanel.getChildByName("btnForge").active=!0},t.prototype.backPackItemBtnClick=function(){this.equipmentGrid.active=!1,this.itemGrid.active=!0,this.backpackPanel.getChildByName("backPackCapacity").active=!1,this.backpackPanel.getChildByName("btnForge").active=!1},t.prototype.backPackItemsClick=function(e){var t=e.target.name,n=t.substr(t.length-1,1),a=parseInt(n)-1;this.currentItemsId=a,this.backpackPanel.getChildByName("equipDetails").active=!0;var i=this.backpackPanel.getChildByName("equipDetails").getChildByName("itemBg");if(i.getChildByName("name").getComponent(cc.Label).string=e.target.getChildByName("name").getComponent(cc.Label).string,i.getChildByName("img").getComponent(cc.Sprite).spriteFrame=e.target.getChildByName("img").getComponent(cc.Sprite).spriteFrame,i.getChildByName("num").getComponent(cc.Label).string="\u62e5\u6709\uff1a"+this.currentBpItemArr[this.currentItemsId],i.getChildByName("imgFrame").getComponent(cc.Sprite).spriteFrame=e.target.getComponent(cc.Sprite).spriteFrame,this.currentItemsId>3){var o=r.default.getInstance().getHeroSyntheicNum(this.currentItemsId);i.getChildByName("syntheticLabel").active=!0,i.getChildByName("syntheticLabel").getComponent(cc.Label).string="\u5408\u6210\u8be5\u82f1\u96c4\u9700\u8981"+o+"\u788e\u7247",i.getChildByName("syntheticLabel").children[0].getComponent(cc.RichText).string="<color=#ff0000>"+this.currentBpItemArr[this.currentItemsId]+"</c><color=#643200>/"+o+"</color>",this.backpackPanel.getChildByName("equipDetails").getChildByName("useBtn").active=!1}else i.getChildByName("syntheticLabel").active=!1,this.backpackPanel.getChildByName("equipDetails").getChildByName("useBtn").active=!0},t.prototype.useItemsBtnClick=function(e){var t=this.backpackPanel.getChildByName("equipDetails").getChildByName("itemBg");if(this.currentBpItemArr[this.currentItemsId]<=0)console.log("\u6ca1\u6709\u6b64\u7269\u54c1");else{switch(this.currentItemsId){case 0:var n=r.default.getInstance().h_expBookNum;this.addExp(n),this.currentBpItemArr[this.currentItemsId]-=1,a.default.getInstance().getItemTips("\u7ecf\u9a8c",n),t.getChildByName("num").getComponent(cc.Label).string="\u62e5\u6709\uff1a"+this.currentBpItemArr[this.currentItemsId];break;case 1:n=r.default.getInstance().l_expBookNum;this.addExp(n),this.currentBpItemArr[this.currentItemsId]-=1,a.default.getInstance().getItemTips("\u7ecf\u9a8c",n),t.getChildByName("num").getComponent(cc.Label).string="\u62e5\u6709\uff1a"+this.currentBpItemArr[this.currentItemsId];break;case 2:this.currentBpItemArr[this.currentItemsId]-=1,t.getChildByName("num").getComponent(cc.Label).string="\u62e5\u6709\uff1a"+this.currentBpItemArr[this.currentItemsId];var i=Math.ceil(4*Math.random())+3;n=Math.ceil(2*Math.random());this.currentBpItemArr[i]+=n,a.default.getInstance().getItemTips(r.default.getInstance().getItemName(i),n),this.updateBackPackItem();break;case 3:var o=this.menuBtnParent.getChildByName("btn_forge");this.displayPanel(this.forgePanel,o),this.defaultPlayerDisPlay(),e.target.parent.active=!1}this.updateBackPackItem(),r.default.getInstance().saveDataToLocal(3),r.default.getInstance().saveDataToLocal(4)}},t.prototype.recruitBtnClick=function(){this.recruitingPanel.getChildByName("recruitPanel").active=!0,this.recruitingPanel.getChildByName("shopPanel").active=!1},t.prototype.shopBtnClick=function(){this.recruitingPanel.getChildByName("recruitPanel").active=!1,this.recruitingPanel.getChildByName("shopPanel").active=!0},t.prototype.recycleEquipment=function(){var e=this;if(!(this.equipmentGrid.childrenCount<=0)){for(var t=0,n=this.equipmentGrid.childrenCount,i=0;i<n;i++){var o=this.equipmentGrid.children[i];this.recycleEffectAni(o);var c=parseInt(o.name),s=r.default.getInstance().getEqipNameFromId(c,2,1).toString();t+=parseInt(s)}this.scheduleOnce(function(){a.default.getInstance().getItemTips("\u91d1\u5e01",t),a.default.getInstance().getItemTips("\u953b\u9020\u77f3",n);for(var i=0;i<n;i++)a.default.getInstance().destroyNode(e.equipmentGrid.children[0],a.default.getInstance().equipmentPool);e.addCoin(t),e.currentBpEquipArr=[],r.default.getInstance().saveDataToLocal(3),e.updateBackPackCapacity()},.8)}},t.prototype.recruitHero=function(){var e=Math.ceil(4*Math.random())+3,t=Math.ceil(3*Math.random());this.currentBpItemArr[e]+=t,a.default.getInstance().getItemTips(r.default.getInstance().getItemName(e),t),this.updateBackPackItem()},t.prototype.exChangeItem=function(e){var t=e.target.parent.name,n=t.substr(t.length-1,1),i=parseInt(n)-1;i<=3?(this.currentBpItemArr[i]+=1,a.default.getInstance().getItemTips(r.default.getInstance().getItemName(i),1),this.updateBackPackItem()):console.log("60\u7ea7\u5f00\u542f")},t.prototype.bossBtnClick=function(){this.popPanel.getChildByName("chooseBossPanel").active=!0},t.prototype.challengeBossBtnClick=function(e){var t=e.target.parent.name.substring(5),n=parseInt(t);a.default.getInstance().bossLevelId=n,a.default.getInstance().fightModel=0,this.popPanel.getChildByName("chooseBossPanel").active=!1,a.default.getInstance().enterFightingScene()},t.prototype.recycleEffectAni=function(e){var t=this;if(this.recycleEffectPool.size()>0)var n=this.recycleEffectPool.get();else n=cc.instantiate(this.recycleEffectPrefab);n.parent=e,n.position=cc.v2(38,-43),n.getComponent(cc.Animation).play(),this.scheduleOnce(function(){a.default.getInstance().destroyNode(n,t.recycleEffectPool)},.8)},t.instance=null,__decorate([c(cc.Node)],t.prototype,"menuBtnParent",void 0),__decorate([c(cc.Node)],t.prototype,"player",void 0),__decorate([c(cc.Node)],t.prototype,"rolePanel",void 0),__decorate([c(cc.Node)],t.prototype,"forgePanel",void 0),__decorate([c(cc.Node)],t.prototype,"townPanel",void 0),__decorate([c(cc.Node)],t.prototype,"backpackPanel",void 0),__decorate([c(cc.Node)],t.prototype,"recruitingPanel",void 0),__decorate([c(cc.Node)],t.prototype,"equipmentGrid",void 0),__decorate([c(cc.Node)],t.prototype,"itemGrid",void 0),__decorate([c(cc.Prefab)],t.prototype,"itemTipsPrefab",void 0),__decorate([c(cc.Prefab)],t.prototype,"recycleEffectPrefab",void 0),__decorate([c(cc.Prefab)],t.prototype,"flyItemPrefabArray",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"heroIconArr",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"heroImgArr",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"forceImgArr",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"atkTypeImgArr",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"equipImgArr",void 0),t=n=__decorate([o],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./DataManager":"DataManager","./GameManager":"GameManager"}],startGame:[function(e,t,n){"use strict";cc._RF.push(t,"effb7z9ev1D6Y3vY95oQfRr","startGame"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_startGame=null,t.chooseNameNode=null,t.homePage=null,t.storyPanel=null,t.autoInGameTime=20,t.currentStoryLabel=null,t.currenStoryId=0,t.isStart=!1,t.isNamed=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initGame(),this.btn_startGame=this.node.getChildByName("btn_startGame"),cc.director.preloadScene("mainGame")},t.prototype.initGame=function(){var e=this;cc.loader.loadRes("config",function(t,n){if(t)console.log("startGame\u52a0\u8f7djson\u6587\u4ef6\u51fa\u9519");else{var a=JSON.parse(cc.sys.localStorage.getItem("config"));e.isNamed=null==a?n.json.isNamed:a.json.isNamed,e.btn_startGame.on(cc.Node.EventType.TOUCH_END,function(){if(cc.sys.isNative)jsb.reflection.callStaticMethod("CC3drthNativeRoad","cc_cocosCallNativeWithName:params:","eventRecord",'{"event":1}');e.isNamed?e.enterMainGame():e.firstEnterGame()},this)}})},t.prototype.firstEnterGame=function(){this.enterMainGame()},t.prototype.enterMainGame=function(){var e=this;null!=JSON.parse(cc.sys.localStorage.getItem("config"))?cc.director.loadScene("mainGame"):cc.loader.loadRes("config",function(t,n){t?console.log("startGame\u52a0\u8f7djson\u6587\u4ef6\u51fa\u9519"):(n.json.isNamed=!0,n.json.playerProperty.name=e.node.getComponent("RandomName").initName(),cc.sys.localStorage.setItem("config",JSON.stringify(n)),cc.director.loadScene("mainGame"))})},t=__decorate([r],t)}(cc.Component));n.default=i,cc._RF.pop()},{}]},{},["Camera","CollisderManager","DataManager","GameManager","MapScroll","Monster","MonsterManager","Player","PlayerAi","RandomName","UiManager","startGame"]);